<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Kancil AI{% endblock %}</title>
  <style>
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --text:#0b1220; --muted:#6b7280; --border:#e5e7eb;
      --brand:#111827; --accent:#2563eb; --accent-2:#1d4ed8; --danger:#dc2626;
      --shadow:0 1px 2px rgba(0,0,0,.05); --radius:12px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
    }

    .layout{display:flex; min-height:100vh}
    .sidebar{
      width:240px; background:#fff; border-right:1px solid var(--border);
      padding:18px 14px; position:sticky; top:0; height:100vh;
    }
    .brand{font-weight:800; font-size:20px; color:var(--brand); margin:2px 6px 14px 6px;}
    .nav{display:flex; flex-direction:column; gap:8px}
    .nav a{
      display:block; padding:12px 14px; border-radius:10px; border:1px solid var(--border);
      color:var(--text); text-decoration:none; font-size:18px; font-weight:600;
    }
    .nav a:hover{background:#f3f4f6}
    .nav a.active{background:#eef2ff; border-color:#c7d2fe}
    .nav .muted{color:var(--muted); font-size:12px; padding:8px 6px}

    .main{flex:1; padding:24px; max-width:1100px; margin:0 auto}

    .toolbar{display:flex; align-items:center; gap:.5rem; margin-bottom:1rem}
    .btn{
      display:inline-flex; align-items:center; gap:.5rem; padding:10px 14px; border-radius:10px;
      border:1px solid var(--border); background:#fff; color:var(--text); text-decoration:none;
      font-size:16px; font-weight:600;
    }
    .btn.primary{background:var(--accent); border-color:var(--accent); color:#fff}
    .btn.primary:hover{background:var(--accent-2); border-color:var(--accent-2)}
    .btn.danger{background:#fee2e2; color:#991b1b; border-color:#fecaca}
    .btn:disabled{opacity:.6; cursor:not-allowed}

    .card{
      background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
      padding:16px; box-shadow:var(--shadow);
    }
    .row{display:flex; gap:.75rem; align-items:center}
    .muted{color:var(--muted)}
    .prose h1,.prose h2,.prose h3{margin:.9rem 0 .4rem}
    .prose p{margin:.4rem 0}
    input[type="text"], input[type="file"], textarea{
      width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:10px; font-size:16px;
      background:#fff; color:var(--text);
    }

    /* Bigger “Saved notes” title buttons */
    .card .row .btn[data-title]{font-size:20px; padding:14px 18px; border-radius:14px;}

    @media (max-width: 820px){
      .layout{flex-direction:column}
      .sidebar{width:100%; height:auto; position:relative}
      .nav{flex-direction:row; flex-wrap:wrap}
      .main{padding:16px}
    }
  </style>
  {% block head %}{% endblock %}
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <div class="brand">Kancil AI</div>
      <nav class="nav">
        <a href="{{ url_for('index') }}">Home</a>
        <a href="{{ url_for('dashboard') }}">Dashboard</a>
        <!-- Chat lives at /chatbot (blueprint is registered with url_prefix='/chatbot') -->
        <a href="/chatbot">Chatbot</a>
        <a href="{{ url_for('past_papers') }}">Past Papers</a>
        <div class="muted">Workspace opens after you load or create notes.</div>
      </nav>
    </aside>

    <main class="main">
      {% block content %}
      <h1>Welcome to Kancil AI</h1>
      <p class="muted">Select a feature from the navigation to get started.</p>
      {% endblock %}
    </main>
  </div>

  <script>
    // Highlight active link based on current path
    (function(){
      const path = location.pathname.replace(/\/+$/,'') || '/';
      document.querySelectorAll('.nav a').forEach(a=>{
        const href = a.getAttribute('href'); if (!href) return;
        const h = href.replace(/\/+$/,'') || '/';
        if (h === path || (h !== '/' && path.startsWith(h))) a.classList.add('active');
      });
    })();
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>

